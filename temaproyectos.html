<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Proyectos Interactiva</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; text-align: center; padding: 2rem; }
    section { padding: 2rem; }
    h2 { border-bottom: 2px solid #667eea; padding-bottom: 0.5rem; }
    .interactive { margin: 1rem 0; }
    .crucigrama, .wbs, .gantt, .triangulo, .quiz { border: 1px solid #ccc; padding: 1rem; border-radius: 8px; }
    .draggable { padding: 0.5rem; background: #f0f0f0; margin: 0.5rem; cursor: move; display: inline-block; }
    .dropzone { min-height: 50px; border: 2px dashed #aaa; padding: 1rem; margin: 0.5rem 0; }
    .hidden { display: none; }
    button { background: #667eea; color: #fff; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #5a6ad9; }
  </style>
</head>
<body>
  <header>
    <h1>Gestión de Proyectos - Material Interactivo</h1>
  </header>
  <main>
    <!-- 1. Introducción Animada -->
    <section id="intro">
      <h2>1. Introducción Animada</h2>
      <div class="interactive">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/1LqNkmOnaEY" frameborder="0" allowfullscreen></iframe>
      </div>
    </section>

    <!-- 2. Crucigrama de términos -->
    <section id="crucigrama">
      <h2>2. Crucigrama de Términos</h2>
      <div class="interactive crucigrama">
        <p>Arrastra las definiciones al término correspondiente:</p>
        <div id="terms">
          <div class="draggable" draggable="true" id="def-cpm">Critical Path Method</div>
          <div class="draggable" draggable="true" id="def-pert">Project Evaluation & Review Technique</div>
          <div class="draggable" draggable="true" id="def-wbs">Work Breakdown Structure</div>
          <div class="draggable" draggable="true" id="def-evm">Earned Value Management</div>
        </div>
        <div id="grid">
          <div>
            <strong>CPM:</strong> <span class="dropzone" data-term="def-cpm"></span>
          </div>
          <div>
            <strong>PERT:</strong> <span class="dropzone" data-term="def-pert"></span>
          </div>
          <div>
            <strong>WBS:</strong> <span class="dropzone" data-term="def-wbs"></span>
          </div>
          <div>
            <strong>EVM:</strong> <span class="dropzone" data-term="def-evm"></span>
          </div>
        </div>
        <button onclick="checkCrucigrama()">Verificar</button>
        <p id="crucigrama-result"></p>
      </div>
    </section>

    <!-- 3. Simulación Triángulo de hierro -->
    <section id="triangulo">
      <h2>3. Triángulo de Hierro</h2>
      <div class="interactive triangulo">
        <p>Ajusta los controles y observa el impacto:</p>
        <label>Tiempo: <input type="range" id="timeRange" min="0" max="100" value="50"></label>
        <label>Costo: <input type="range" id="costRange" min="0" max="100" value="50"></label>
        <label>Alcance: <input type="range" id="scopeRange" min="0" max="100" value="50"></label>
        <svg id="triangleSVG" width="300" height="260"></svg>
      </div>
    </section>

    <!-- 4. Creación de WBS -->
    <section id="wbs">
      <h2>4. Creación de una WBS</h2>
      <div class="interactive wbs">
        <p>Arrastra las tareas para descomponer el proyecto:</p>
        <div id="wbs-tasks">
          <div class="draggable" draggable="true" id="task-design">Diseño</div>
          <div class="draggable" draggable="true" id="task-dev">Desarrollo</div>
          <div class="draggable" draggable="true" id="task-test">Pruebas</div>
          <div class="draggable" draggable="true" id="task-deploy">Despliegue</div>
        </div>
        <div id="wbs-structure" class="dropzone"></div>
      </div>
    </section>

    <!-- 5. Diagrama de Gantt simple -->
    <section id="gantt">
      <h2>5. Diagrama de Gantt</h2>
      <div class="interactive gantt">
        <p>Introduce tareas y duraciones:</p>
        <div>
          <input type="text" id="ganttTask" placeholder="Nombre tarea"><input type="number" id="ganttDuration" placeholder="Duración (días)"><button onclick="addGanttTask()">Añadir</button>
        </div>
        <canvas id="ganttCanvas" width="800" height="200"></canvas>
      </div>
    </section>

    <!-- 6. Simulador Ruta Crítica -->
    <section id="critical-path">
      <h2>6. Simulador Ruta Crítica</h2>
      <div class="interactive">
        <p>Define nodos y dependencias:</p>
        <textarea id="cpInput" rows="4" cols="50" placeholder="Formato: Tarea,Duración,Predecesor1|Predecesor2"></textarea><br>
        <button onclick="simulateCP()">Simular</button>
        <pre id="cpOutput"></pre>
      </div>
    </section>

    <!-- 7. Mini casos prácticos -->
    <section id="casos">
      <h2>7. Mini Casos Prácticos</h2>
      <div class="interactive quiz">
        <p><strong>MOSE en Venecia:</strong> ¿En qué año empezaron a funcionar las compuertas del proyecto?</p>
        <label><input type="radio" name="mose" value="2012"> 2012</label><br>
        <label><input type="radio" name="mose" value="2020"> 2020</label><br>
        <label><input type="radio" name="mose" value="2019"> 2019</label><br>
        <button onclick="checkMOSE()">Verificar</button>
        <p id="moseResult"></p>
      </div>
    </section>

    <!-- 8. Quiz final -->
    <section id="quiz-final">
      <h2>8. Evaluación Final</h2>
      <div class="interactive quiz">
        <p>¿Cuál es el propósito de un WBS?</p>
        <label><input type="radio" name="q1" value="a"> Identificar la ruta crítica</label><br>
        <label><input type="radio" name="q1" value="b"> Descomponer un proyecto en paquetes manejables</label><br>
        <label><input type="radio" name="q1" value="c"> Calcular el ROI</label><br>
        <button onclick="checkQuiz()">Enviar</button>
        <p id="quizResult"></p>
      </div>
    </section>
  </main>

  <script>
    // Drag & Drop
    document.querySelectorAll('.draggable').forEach(el => {
      el.addEventListener('dragstart', (e) => { e.dataTransfer.setData('text', e.target.id); });
    });
    document.querySelectorAll('.dropzone').forEach(zone => {
      zone.addEventListener('dragover', e => e.preventDefault());
      zone.addEventListener('drop', e => {
        e.preventDefault();
        const id = e.dataTransfer.getData('text');
        if(!zone.children.length) zone.appendChild(document.getElementById(id));
      });
    });

    // 2. Check crucigrama
    function checkCrucigrama() {
      let correct = 0;
      document.querySelectorAll('#grid .dropzone').forEach(zone => {
        const term = zone.dataset.term;
        if(zone.children[0] && zone.children[0].id === term) correct++;
      });
      document.getElementById('crucigrama-result').innerText = correct === 4 ? '¡Correcto!' : `Has colocado ${correct} de 4 bien.`;
    }

    // 3. Triángulo
    function drawTriangle() {
      const t = +document.getElementById('timeRange').value;
      const c = +document.getElementById('costRange').value;
      const s = +document.getElementById('scopeRange').value;
      const svg = document.getElementById('triangleSVG');
      svg.innerHTML = '';
      const points = [[150,10], [10,240], [290,240]];
      const norm = [t/100, c/100, s/100];
      const px = points.map((p,i) => [
        p[0]*norm[i] + (1-norm[i])*150,
        p[1]*norm[i] + (1-norm[i])*240
      ]);
      const poly = document.createElementNS('http://www.w3.org/2000/svg','polygon');
      poly.setAttribute('points', px.map(pt => pt.join(',')).join(' '));
      poly.setAttribute('fill', 'rgba(102,126,234,0.5)');
      svg.appendChild(poly);
    }
    ['timeRange','costRange','scopeRange'].forEach(id => document.getElementById(id).addEventListener('input', drawTriangle));
    drawTriangle();

    // 5. Gantt
    let ganttTasks = [];
    function addGanttTask() {
      const name = document.getElementById('ganttTask').value;
      const dur = +document.getElementById('ganttDuration').value;
      if(name && dur) {
        ganttTasks.push({name,dur});
        drawGantt();
      }
    }
    function drawGantt() {
      const c = document.getElementById('ganttCanvas');
      const ctx = c.getContext('2d');
      ctx.clearRect(0,0,c.width,c.height);
      let y=20, x=100;
      ganttTasks.forEach((t,i) => {
        ctx.fillStyle = '#667eea';
        ctx.fillRect(x, y, t.dur*10, 20);
        ctx.fillStyle = '#000';
        ctx.fillText(t.name, 10, y+15);
        y += 30;
      });
    }

    // 6. Critical Path
    function simulateCP() {
      const lines = document.getElementById('cpInput').value.trim().split('\n');
      const tasks = {};
      lines.forEach(l => {
        const [name,dur,pred] = l.split(',');
        tasks[name] = {dur:+dur, pred: pred? pred.split('|'): []};
      });
      // Simplified longest path
      const memo = {};
      function dfs(n) {
        if(memo[n]!=null) return memo[n];
        const t = tasks[n];
        if(!t.pred.length) return memo[n] = t.dur;
        return memo[n] = t.dur + Math.max(...t.pred.map(p=>dfs(p)));
      }
      let maxTask = '', maxTime=0;
      Object.keys(tasks).forEach(n=>{ const time = dfs(n); if(time>maxTime){maxTime=time;maxTask=n;} });
      document.getElementById('cpOutput').innerText = `Ruta crítica termina en '${maxTask}' con duración ${maxTime}`;
    }

    // 7. MOSE quiz
    function checkMOSE() {
      const val = document.querySelector('input[name="mose"]:checked');
      document.getElementById('moseResult').innerText = val && val.value=== '2020'? '¡Correcto!' : 'Respuesta incorrecta.';
    }

    // 8. Quiz final
    function checkQuiz() {
      const val = document.querySelector('input[name="q1"]:checked');
      document.getElementById('quizResult').innerText = val && val.value==='b'? '¡Bien!': 'Incorrecto, la respuesta correcta es la B.';
    }
  </script>
</body>
</html>
